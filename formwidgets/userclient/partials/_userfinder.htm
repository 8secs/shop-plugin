<?php if (!$this->previewMode): ?>
    <div class="control-toolbar">
        <div class="toolbar-item toolbar-primary">
            <div data-control="toolbar">

                <button
                        class="btn btn-default"
                        data-control="popup"
                        data-size="huge"
                        data-handler="<?= $this->getEventHandler('onFindRecord') ?>"
                        data-request-data="userfinder_flag: 1"
                        type="button">
                    <i class="icon-th-list"></i> Seleccionar usuario
                </button>

                <button
                        class="btn btn-primary"
                        data-control="popup"
                        data-size="huge"
                        data-handler="<?= $this->getEventHandler('onCreateRecord') ?>"
                        data-request-data="usercreate_flag: 1"
                        type="button"><i class="icon-user"></i> Crear usuario</button>

            </div>
        </div>
    </div>
<?php endif ?>
<div
    id="<?= $this->getId() ?>"
    class="field-recordfinder loading-indicator-container size-input-text"
    data-control="userfinder"
    data-refresh-handler="<?= $this->getEventHandler('onRefresh') ?>"
    data-data-locker="#<?= $field->getId() ?>">
    <span class="form-control">

        <?php if ($value): ?>
            <span class="primary"><?= e($nameValue) ?: 'Undefined' ?></span>
            <?php if ($descriptionValue): ?>
                <span class="secondary"> - <?= e($descriptionValue) ?></span>
            <?php endif ?>
        <?php else: ?>
            <span class="text-muted"><?= $prompt ?></span>
        <?php endif ?>
    </span>



    <input
        type="hidden"
        name="<?= $field->getName() ?>"
        id="<?= $field->getId() ?>"
        value="<?= e($value) ?>"
        />
</div>

